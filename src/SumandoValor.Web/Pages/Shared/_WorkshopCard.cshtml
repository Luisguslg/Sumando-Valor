@model SumandoValor.Web.Pages.Shared.WorkshopCardModel

@{
    var statusClass =
        Model.Estatus == SumandoValor.Domain.Entities.EstatusTaller.Abierto ? "bg-success" :
        Model.Estatus == SumandoValor.Domain.Entities.EstatusTaller.Cerrado ? "bg-secondary" :
        Model.Estatus == SumandoValor.Domain.Entities.EstatusTaller.Cancelado ? "bg-danger" : "bg-info";
}

<div class="card card-kpmg h-100 hover-lift">
    <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
            <div class="flex-grow-1">
                @if (!string.IsNullOrWhiteSpace(Model.CursoTitle))
                {
                    <div class="text-muted small mb-1">@Model.CursoTitle</div>
                }
                <h3 class="h5 fw-bold mb-0">@Model.Title</h3>
            </div>
            <div class="text-end">
                <span class="badge @statusClass">@Model.Estatus</span>
            </div>
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.Description))
        {
            <p class="text-muted mb-3">
                @(Model.Description.Length > 120 ? Model.Description.Substring(0, 120) + "..." : Model.Description)
            </p>
        }

        <div class="row g-3 mb-3">
            <div class="col-6">
                <small class="text-muted d-block">
                    <i class="bi bi-calendar-event me-2 text-primary"></i>Fecha
                </small>
                <strong>@DateFormat.FechaConDia(Model.FechaInicio)</strong>
            </div>
            <div class="col-6">
                <small class="text-muted d-block">
                    <i class="bi bi-clock me-2 text-primary"></i>Hora
                </small>
                <strong>@DateFormat.Hora(Model.HoraInicio)</strong>
            </div>
            <div class="col-6">
                <small class="text-muted d-block">
                    <i class="bi bi-geo-alt me-2 text-primary"></i>Modalidad
                </small>
                <strong>@Model.Modalidad</strong>
            </div>
            <div class="col-6">
                <small class="text-muted d-block">
                    <i class="bi bi-people me-2 text-primary"></i>Cupos
                </small>
                <strong>
                    @Model.CuposDisponibles/@Model.CuposMaximos
                </strong>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <span class="badge @(Model.CuposDisponibles > 0 ? "bg-success" : "bg-danger")">
                @(Model.CuposDisponibles > 0 ? "Cupos disponibles" : "Sin cupos")
            </span>
            <a asp-page="@Model.PrimaryCtaPage" asp-route-id="@Model.TallerId" class="btn btn-primary btn-sm">
                <i class="bi bi-eye me-1"></i>@Model.PrimaryCtaText
            </a>
        </div>
    </div>
</div>

